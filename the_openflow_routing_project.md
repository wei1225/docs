#the OpenFlow routing project

##术语
1. 传统网络/普通网络：指没有采用OpenFlow技术的当前网络
2. OpenFlow网络：指完全由OpenFlow交换机构成的网络
3. 域/区域：(非标准)本文表示一定范围内的网络
4. 普通数据包/生产流量：表示由主机产生，目的也是主机的数据包/流量

##目标
从host（主机）角度来看，OpenFlow网络和传统网络没有区别，即不需要进行任何改变即可接入；从传统网络角度来看，与之相连的OpenFlow网络和普通网络没有区别

因此，要在与主机相连的OpenFlow交换机上表现网关功能；在与外界网络相连的OpenFlow交换机上表现标准路由协议(BGP,OSPF,etc)

##模块

「此处应有图片」

##思路

###总

主要分域内(A)和域外(B)两个ryu app。A负责域内的路由，B负责域外的路由，A与B之间互相提供接口。

###分

A:

基于ryu的拓扑发现模块，收集拓扑信息，并且整理成易于进行路由计算的数据结构；

基于输入(配置文件，用户输入，web界面，etc)的配置信息，使某些交换机表现出网关功能；

当普通数据包到达时，进行路由计算(此处应有算法和优化)，分发流表(此处应有timeout)。若数据包是去往域外的话，通过B提供的接口获得应送往的边界“路由器”，将数据包导向该交换机；

B:

（直接与外界路由器建立关系）

基于配置信息，控制边缘“路由器”向外发包或接受请求，与域外路由器建立连接，并且交换路由信息；

当出区域的数据包到达时，根据路由表转发至相应端口；

当入区域的数据包到达时，转交或直接由A处理(?)；

当A的请求到达时，根据路由表进行计算(此处应有协议细节)，返回出口“路由器”；

##数据结构设计

以下数据结构应该可以由用户界面(user interface)进行读取或修改；

(?)应该支持将数据永久存储至数据库/从数据库的数据初始化

##A：
####switch:
主要存储端口(port)列表，以及到达某IP地址/of交换机的下一跳出口

####port:
主要存储mac地址，IP地址，以及与之相连的另一`(switch, port)`组合

##B：
####路由协议实体
应为每个与本网络(controller/ryu app/B)相连的peer(路由器)实例化一个该实体，存储与协议相关的参数，并与peer通信

####路由表
记录目的地址及相应的出口位置(不同协议可能会有轻微差异)
